<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sign-in</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <link rel="stylesheet" href="./style/sign_in_up.css">
  
  <link rel="stylesheet" href="./style/nav.css">


</head>

<body>
  <!-- nav bar code -->
  <div class="nav-container">
    <div class="nav-heading">
        <div></div>
        <div>
            <img src="https://cdn2.stylecraze.com/wp-content/themes/buddyboss-child/images/sc-logo.png" alt="">
        </div>
        <div>
            <input type="text" placeholder="Search">
            <span class="material-icons md-dark md-inactive ">search</span>
        </div>
    </div>
    <div class="nav-menu">
        <ul>
            <li><a href="">MAKEUP</a></li>
            <li><a href="#">HAIR CARE</a></li>
            <li><a href="#">SKIN CARE</a></li>
            <li><a href="#">HAIRSTYLES</a></li>
            <li><a href="#">HEALTH & WELLNESS</a></li>
            <li><a href="#">NEWS</a></li>
            <li><a href="#">TOOLS</a></li>
            <li><a href="#">ABOUT US</a></li>
            <li id="account-tab"><a href="#">ACCOUNT</a> 
            <ul>
                <li id="signup">Sign-Up</li>
                <li id="signin">Sign-In</li>
            </ul>
            </li>
        </ul>
    </div>
   
</div>
<div class="navbar-gap"></div>
   <!-- sign-in code -->
    <div class="container">
       
        <form action="" id="form">
            <h2>Sign In</h2>
                <label>Email</label>
                <input type="email" placeholder="Enter Email" id="email">
                <label>Password</label>
                <input type="text" placeholder="Enter Password" id="pass">
                <a id="haveaccount" href="">Forget Password?</a>
                <input type="submit" value="SIGN IN" id="submit" >
                <p >Don't have an account?
                    <span>
                        <a id="haveaccount" href="sign_up.html" >Sign Up</a>
                    </span></p>
        </form>
</body>
</html>
<script src="./script/nav.js"></script>

<script>
    let form = document.querySelector("form");
let submitbtn = document.querySelector("#submit");
form.pass.addEventListener("keyup", isfilled);
function isfilled(event) {
  let pvalue = event.currentTarget.value;
  if (pvalue == "") {
    submitbtn.disabled = true;
  } else {
    submitbtn.disabled = false;
    submitbtn.style.cursor = "pointer";
  }
}

let userData = JSON.parse(localStorage.getItem("userdata")) || [];
form.addEventListener("submit", function (event) {
  event.preventDefault();
  if (userData.length == 0) {
    let text = confirm("You Dont Have Account \n Create It First");
    if (text == true) {
      window.location.href = "sign_up.html";
    }
  } else {
    let obj={ email:form.email.value,
              pass :form.pass.value}
let flag=true;
    userData.forEach(function(elem){
        if(elem.user_email===obj.email && elem.user_pass===obj.pass)
        {
          flag=false;
          localStorage.setItem("SignIn",JSON.stringify(elem));
          alert("Log-in Sucsess.!!");
          localStorage.setItem("loginFlag",JSON.stringify(1));
           window.location.replace("index.html"); 
        }
        if(flag==true){
          alert("Email or Password Incorrect");
        }
    });




    for (let i in userData) {
      // console.log("inside for");
      let stored_email = userData[i].user_email;
      let stored_lpass = userData[i].user_pass;
      if (email == stored_email && pass == stored_lpass) {
       
        break;
      } 
    }
  }
  //    if(form.email.value==userData.)
  //                 form.email.value,
  //                 form.pass.value

  // if(obj.user_pass.length<6)
  // {
  //     alert("Paasword length Should Be More than 5 ")
  //     event.preventDefault();
  // }
  // else{
  //     console.log(obj)
  // }
});

</script>